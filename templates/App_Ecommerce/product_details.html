{% extends 'layouts/base.html' %}
{% load static %}


{% block content %}
<style>
    /* Basic styling */
    body {
        font-family: Arial, sans-serif;
        padding: 20px;
    }

    h1 {
        color: #333;
    }

    .color-options {
        display: flex;
        gap: 10px;
    }

    .color-box {
        padding: 10px;
        border: 2px solid #ccc;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .color-box.active {
        border-color: #007bff;
        background-color: #e0f0ff;
    }

    .size-options {
        margin-top: 20px;
    }

    .size-list {
        display: none;
    }

    .size-list.active {
        display: block;
    }

    .size-box {
        padding: 10px;
        margin: 5px 0;
        border: 1px solid #ccc;
        border-radius: 5px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .size-box:hover {
        background-color: #f0f0f0;
    }

    .size-box.selected {
        border-color: #28a745;
        background-color: #e6ffe6;
    }
</style>

    <!-- breadcrumb start -->
    <div class="breadcrumb-section">
        <div class="container">
            <h2>{{ item.title }}</h2>
            <nav class="theme-breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{% url 'App_Ecommerce:home' %}">Home</a></li>
                    <li class="breadcrumb-item"><a href="{% url 'App_Ecommerce:product_list' %}">{{ item.Category }}</a></li>
                    <li class="breadcrumb-item active">{{ item.title }}</li>
                </ol>
            </nav>
        </div>
    </div>
    <!-- breadcrumb End -->

    <!-- section start -->
    <section>
        <div class="collection-wrapper">
            <div class="container">
                <div class="collection-wrapper">
                    <div class="row g-4">
                        <div class="col-lg-4">
                            <div class="product-slick">
                                <div><img src="{% static 'assets/images/product-details/product/17.jpg' %}" alt=""
                                        class="w-100 img-fluid blur-up lazyload"></div>
                                <div><img src="{% static 'assets/images/product-details/product/17.jpg' %}" alt=""
                                        class="w-100 img-fluid blur-up lazyload"></div>
                                <div><img src="{% static 'assets/images/product-details/product/17.jpg' %}" alt=""
                                        class="w-100 img-fluid blur-up lazyload"></div>
                                <div><img src="{% static 'assets/images/product-details/product/17.jpg' %}" alt=""
                                        class="w-100 img-fluid blur-up lazyload"></div>
                            </div>
                            <div class="row">
                                <div class="col-12">
                                    <div class="slider-nav">
                                        <div><img src="{% static 'assets/images/product-details/product/17.jpg' %}" alt=""
                                                class="img-fluid blur-up lazyload"></div>
                                        <div><img src="{% static 'assets/images/product-details/product/18.jpg' %}" alt=""
                                                class="img-fluid blur-up lazyload"></div>
                                        <div><img src="{% static 'assets/images/product-details/product/19.jpg' %}" alt=""
                                                class="img-fluid blur-up lazyload"></div>
                                        <div><img src="{% static 'assets/images/product-details/product/18.jpg' %}" alt=""
                                                class="img-fluid blur-up lazyload"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="product-page-details product-description-box sticky-details mt-0">

                                <h2 class="main-title">{{ item.title }} </h2>
                                <!-- <div class="product-rating">
                                    <div class="rating-list">
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-fill"></i>
                                        <i class="ri-star-line"></i>
                                    </div>

                                    <span class="divider">|</span>
                                    <a href="#!">20 Reviews</a>
                                </div> -->

                                <div class="price-text">
                                    <h3><span class="fw-normal">MRP:</span>
                                        BDT {{item.discount_price}}
                                    </h3><span>*VAT Inclusive*</span>
                                </div>

                                <div class="size-delivery-info flex-wrap">
                                    <a href="#return" data-bs-toggle="modal" class=""><i class="ri-truck-line"></i>
                                        Delivery &amp; Return </a>

                                    <a href="#ask-question" class="" data-bs-toggle="modal"><i
                                            class="ri-questionnaire-line"></i>
                                        Ask a Question </a>

                                </div>


                                <div class="accordion accordion-flush product-accordion" id="accordionFlushExample">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button collapsed" type="button"
                                                data-bs-toggle="collapse" data-bs-target="#flush-collapseOne"
                                                aria-expanded="false" aria-controls="flush-collapseOne">
                                                Product Description </button>
                                        </h2>
                                        <div id="flush-collapseOne" class="accordion-collapse collapse"
                                            data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                <p>{{ item.product_details }}</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#flush-collapseTwo" aria-expanded="false"
                                                aria-controls="flush-collapseTwo">
                                                Information </button>
                                        </h2>
                                        <div id="flush-collapseTwo" class="accordion-collapse collapse show"
                                            data-bs-parent="#accordionFlushExample">
                                            <div class="accordion-body">
                                                <div class="bordered-box border-0 mt-0 pt-0">
                                                    <h4 class="sub-title">
                                                        product Info</h4>
                                                    <ul class="shipping-info">
                                                        <li><span>SKU: </span>{{ item.sku }} </li>
                                                        <li><span>Category: </span>{{ item.Category }} </li>
                                                        <li><span>Brand: </span>{{ item.Brand }} </li>
                                                        <li><span>Tag: </span>{{ item.Tag }} </li>
                                                             

                                                        <!-- <li><span>Unit: </span>1
                                                            Item </li> -->

                                                        <!-- <li><span>Weight:
                                                            </span>150 Gms </li> -->

                                                        <!-- <li><span>Stock Status:
                                                            </span>In stock </li> -->

                                                        <!-- <li><span>Quantity:
                                                            </span>40 Items Left </li> -->
                                                    </ul>
                                                </div>

                                                <div class="bordered-box">
                                                    <h4 class="sub-title">
                                                        Delivery Details</h4>
                                                    <ul class="delivery-details">
                                                        <li><i class="ri-truck-line"></i> Your order is
                                                            likely to reach you within 7 days. </li>

                                                        <li><i class="ri-arrow-left-right-line"></i>
                                                            Hassle free returns within 7 Days. </li>
                                                    </ul>
                                                </div>

                                                <div class="dashed-border-box mb-0">
                                                    <h4 class="sub-title">Guaranteed Safe Checkout</h4>
                                                    <img class="img-fluid payment-img" alt=""
                                                        src="{% static 'assets/images/product-details/payments.png' %}">
                                                </div>

                                                <div class="dashed-border-box mb-0">
                                                    <h4 class="sub-title">Secure Checkout</h4>
                                                    <img class="img-fluid payment-img" alt=""
                                                        src="{% static 'assets/images/product-details/secure_payments.png' %}">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-4">
                            <div class="product-page-details product-form-box product-right-box d-flex
                                align-items-center flex-column my-0">
                                <!-- Color Selection -->
                                <h2>Select a Color:</h2>
                                <div class="color-options">
                                    {% for color, data in color_variations.items %}
                                        <div class="color-box" data-color="{{ color }}" data-color-id="{{ data.color_id }}">
                                            {{ color }}
                                        </div>
                                    {% endfor %}
                                </div>

                                <div class="size-options">
                                    {% for color, data in color_variations.items %}
                                        <div class="size-list" id="size-list-{{ data.color_id }}">
                                            <h3>Available Sizes for {{ color }}:</h3>
                                            <ul>
                                                {% for size in data.sizes %}
                                                    <li class="size-box" 
                                                        data-size-id="{{ size.size_id }}" 
                                                        data-quantity="{{ size.quantity }}" 
                                                        data-is-available="{{ size.is_available }}">
                                                        Size: {{ size.size_name }}<br>
                                                        {% if size.is_available %}
                                                            <span>In Stock: {{ size.quantity }}</span>
                                                        {% else %}
                                                            <span style="color: red;">Out of Stock</span>
                                                        {% endif %}
                                                    </li>
                                                {% endfor %}
                                            </ul>
                                        </div>
                                    {% endfor %}
                                </div>

                                <!-- Quantity Input -->
                                <div class="product-buttons">
                                    <div class="qty-section">
                                        <div class="qty-box">
                                            <div class="input-group">
                                                <span class="input-group-prepend">
                                                    <button type="button" class="btn quantity-left-minus" data-type="minus">
                                                        <i class="ri-arrow-left-s-line"></i>
                                                    </button>
                                                </span>
                                                <input type="text" name="quantity" class="form-control input-number" value="1" id="quantity-input" disabled>
                                                <span class="input-group-prepend">
                                                    <button type="button" class="btn quantity-right-plus" data-type="plus">
                                                        <i class="ri-arrow-right-s-line"></i>
                                                    </button>
                                                </span>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <!-- Action Buttons -->
                                <div class="product-buttons">
                                    <div class="d-flex align-items-center gap-3">
                                        <button id="add-to-cart-btn" class="btn btn-animation btn-solid hover-solid scroll-button disabled" type="button">
                                            Add to Cart
                                        </button>
                                        <a href="#!" id="buy-now-btn" class="btn btn-solid buy-button disabled">Buy Now</a>
                                    </div>
                                </div>

                                <!-- Stock Info -->
                                <div class="left-progressbar w-100">
                                    <h6 id="stock-info">Please select a size to see available stock</h6>
                                    <!-- Progress bar (optional, can be added later if needed) -->
                                    <!-- <div role="progressbar" class="progress">
                                        <div class="progress-bar" style="width: 100%;"></div>
                                    </div> -->
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- Section ends -->

    <!-- product-tab starts -->
    <section class="tab-product m-0">
        <div class="container">
            <div class="row">
                <div class="col-sm-12 col-lg-12">
                    <ul class="nav nav-tabs nav-material" id="top-tab" role="tablist">
                        <li class="nav-item"><a class="nav-link active" id="top-home-tab" data-bs-toggle="tab"
                                href="#top-home" role="tab" aria-selected="true"><i
                                    class="icofont icofont-ui-home"></i>Description</a>
                        </li>

                        <li class="nav-item"><a class="nav-link" id="review-top-tab" data-bs-toggle="tab"
                                href="#top-review" role="tab" aria-selected="false"><i
                                    class="icofont icofont-contacts"></i>Review</a>
                        </li>
                        <li class="nav-item"><a class="nav-link" id="contact-top-tab" data-bs-toggle="tab"
                                href="#top-contact" role="tab" aria-selected="false"><i
                                    class="icofont icofont-contacts"></i>Q & A</a>
                        </li>
                    </ul>
                    <div class="tab-content nav-material" id="top-tabContent">
                        <div class="tab-pane fade show active" id="top-home" role="tabpanel"
                            aria-labelledby="top-home-tab">
                            <div class="product-tab-description">
                                <div class="part">
                                    <p>The Model is wearing a white blouse from our stylist's
                                        collection, see the image for a mock-up of what the actual
                                        blouse would look like.it has text written on it in a black
                                        cursive language which looks great on a white color.</p>
                                </div>
                                <div class="part">
                                    <h5 class="inner-title">fabric:</h5>
                                    <p>Art silk is manufactured by synthetic fibres like rayon. It's
                                        light in weight and is soft on the skin for comfort in
                                        summers.Art silk is manufactured by synthetic fibres like rayon.
                                        It's light in weight and is soft on the skin for comfort in
                                        summers.</p>
                                </div>
                                <div class="part">
                                    <h5 class="inner-title">size & fit:</h5>
                                    <p>The model (height 5'8") is wearing a size S</p>
                                </div>
                                <div class="part">
                                    <h5 class="inner-title">Material & Care:</h5>
                                    <p>Top fabric: pure cotton</p>
                                    <p>Bottom fabric: pure cotton</p>
                                    <p>Hand-wash</p>
                                </div>
                            </div>
                        </div>


                        <div class="tab-pane fade" id="top-review" role="tabpanel" aria-labelledby="review-top-tab">
                            <div class="single-product-tables">
                                <div class="row g-3 w-100">
                                    <div class="col-xl-5">
                                        <div class="product-rating-box">
                                            <div class="row">
                                                <div class="col-xl-12">
                                                    <div class="d-flex align-items-center gap-2">
                                                        <h2 class="mb-0 rating-number">4.00</h2>
                                                        <div>
                                                            <span class="base-rating">
                                                                <i class="ri-star-s-fill"></i>
                                                                <i class="ri-star-s-fill"></i>
                                                                <i class="ri-star-s-fill"></i>
                                                                <i class="ri-star-s-fill"></i>
                                                                <i class="ri-star-s-line"></i>
                                                            </span>
                                                            <h4 class="rating-count">Based on 25 Rating</h4>
                                                        </div>
                                                    </div>

                                                    <div class="review-title-2">
                                                        <h4>Review this product
                                                        </h4>
                                                        <p>Let other customers know what you think</p>
                                                        <ul class="product-rating-list">
                                                            <li>
                                                                <div class="rating-product">
                                                                    <h5>5<i class="ri-star-fill"></i></h5>
                                                                    <div class="progress" role="progressbar"
                                                                        aria-label="Basic example" aria-valuenow="100"
                                                                        aria-valuemin="0" aria-valuemax="100">
                                                                        <div class="progress-bar" style="width: 90%">
                                                                        </div>
                                                                    </div>
                                                                    <h5 class="total">9 </h5>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="rating-product">
                                                                    <h5>4<i class="ri-star-fill"></i></h5>
                                                                    <div class="progress" role="progressbar"
                                                                        aria-label="Basic example" aria-valuenow="100"
                                                                        aria-valuemin="0" aria-valuemax="100">
                                                                        <div class="progress-bar" style="width: 75%">
                                                                        </div>
                                                                    </div>
                                                                    <h5 class="total">7
                                                                    </h5>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="rating-product">
                                                                    <h5>3<i class="ri-star-fill"></i></h5>
                                                                    <div class="progress" role="progressbar"
                                                                        aria-label="Basic example" aria-valuenow="100"
                                                                        aria-valuemin="0" aria-valuemax="100">
                                                                        <div class="progress-bar" style="width: 50%">
                                                                        </div>
                                                                    </div>
                                                                    <h5 class="total">5
                                                                    </h5>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="rating-product">
                                                                    <h5>2<i class="ri-star-fill"></i></h5>
                                                                    <div class="progress" role="progressbar"
                                                                        aria-label="Basic example" aria-valuenow="100"
                                                                        aria-valuemin="0" aria-valuemax="100">
                                                                        <div class="progress-bar" style="width: 25%">
                                                                        </div>
                                                                    </div>
                                                                    <h5 class="total">3
                                                                    </h5>
                                                                </div>
                                                            </li>
                                                            <li>
                                                                <div class="rating-product">
                                                                    <h5>1<i class="ri-star-fill"></i></h5>
                                                                    <div class="progress" role="progressbar"
                                                                        aria-label="Basic example" aria-valuenow="100"
                                                                        aria-valuemin="0" aria-valuemax="100">
                                                                        <div class="progress-bar" style="width: 10%">
                                                                        </div>
                                                                    </div>
                                                                    <h5 class="total">1
                                                                    </h5>
                                                                </div>
                                                            </li>
                                                        </ul>
                                                        <button class="btn" data-bs-toggle="modal"
                                                            data-bs-target="#write-review" type="submit">
                                                            Write Review
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xl-7">
                                        <div class="review-people">
                                            <ul class="review-list">
                                                <li>
                                                    <div class="people-box">
                                                        <div>
                                                            <div class="people-image people-text">
                                                                <div class="user-round">
                                                                    <h4>J</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="people-comment">
                                                            <div class="people-name">
                                                                <a href="#!" class="name">John Due</a>
                                                                <h6 class="text-content"> 10 Aug 2024 11:05:AM </h6>
                                                                <ul class="product-rating">
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-line"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-line"></i>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="reply">
                                                                <p>"Wow! This fashion product exceeded all my
                                                                    expectations! From the moment I opened the
                                                                    package, I could tell it was something special.
                                                                    The quality of the materials is outstanding.
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="people-box">
                                                        <div>
                                                            <div class="people-image people-text">
                                                                <div class="user-round">
                                                                    <h4>R</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="people-comment">
                                                            <div class="people-name">
                                                                <a href="#!" class="name">Rhoda Mayer</a>
                                                                <h6 class="text-content"> 10 Aug 2024 11:05:AM
                                                                </h6>
                                                                <ul class="product-rating">
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="reply">
                                                                <p>"Nice the attention to detail in the
                                                                    craftsmanship is truly impressive. Not only
                                                                    does
                                                                    it look fabulous, but it feels incredibly
                                                                    comfortable too. I've received so many
                                                                    compliments whenever I wear it!
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li>
                                                    <div class="people-box">
                                                        <div>
                                                            <div class="people-image people-text">
                                                                <div class="user-round">
                                                                    <h4>J</h4>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div class="people-comment">
                                                            <div class="people-name">
                                                                <a href="#!" class="name">Jack Deo</a>
                                                                <h6 class="text-content"> 10 Aug 2024 11:05:AM </h6>
                                                                <ul class="product-rating">
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-fill"></i>
                                                                    </li>
                                                                    <li class="star-rating">
                                                                        <i class="ri-star-line"></i>
                                                                    </li>
                                                                </ul>
                                                            </div>
                                                            <div class="reply">
                                                                <p>"The product boasts impressive craftsmanship,
                                                                    meticulous attention to detail, and a stunning
                                                                    appearance, resulting in a comfortable feel and
                                                                    numerous compliments."
                                                                </p>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </li>

                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="tab-pane fade" id="top-contact" role="tabpanel" aria-labelledby="contact-top-tab">
                            <div class="post-question-box">
                                <h4>Have Doubts Regarding This Product ? <a href="#ask-question"
                                        data-bs-toggle="modal">Post
                                        Your Question</a>
                                </h4>
                            </div>
                            <div class="question-answer">
                                <ul>
                                    <li>
                                        <div class="question-box">
                                            <h5>Q1</h5>
                                            <h6 class="font-weight-bold que">Does
                                                the dress offer any UV
                                                protection?</h6>
                                            <ul class="link-dislike-box">
                                                <li><a href="#!"><span><i class="ri-thumb-up-fill"></i>
                                                            0</span></a></li>
                                                <li><a href="#!"><span><i class="ri-thumb-down-fill"></i>
                                                            0</span></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="answer-box">
                                            <div class="answer-box">
                                                <h5>A1</h5>
                                                <p class="ans">Yes, the dress
                                                    offers UV protection. It blocks
                                                    harmful UV rays, providing an additional layer of sun
                                                    safety. </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="question-box">
                                            <h5>Q2</h5>
                                            <h6 class="font-weight-bold que">Are
                                                there any pockets, and if so,
                                                how many and where are they located?</h6>
                                            <ul class="link-dislike-box">
                                                <li><a href="#!"><span><i class="ri-thumb-up-fill"></i>
                                                            0</span></a></li>
                                                <li><a href="#!"><span><i class="ri-thumb-down-fill"></i>
                                                            0</span></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="answer-box">
                                            <div class="answer-box">
                                                <h5>A2</h5>
                                                <p class="ans">Yes, there are
                                                    pockets. There are two pockets,
                                                    one on each side of the garment. </p>
                                            </div>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="question-box">
                                            <h5>Q3</h5>
                                            <h6 class="font-weight-bold que">Is the
                                                fabric breathable and
                                                quick-drying?</h6>
                                            <ul class="link-dislike-box">
                                                <li><a href="#!"><span><i class="ri-thumb-up-fill"></i>
                                                            0</span></a></li>
                                                <li><a href="#!"><span><i class="ri-thumb-down-fill"></i>
                                                            0</span></a>
                                                </li>
                                            </ul>
                                        </div>
                                        <div class="answer-box">
                                            <div class="answer-box">
                                                <h5>A3</h5>
                                                <p class="ans">Yes, the fabric is
                                                    breathable, allowing for
                                                    excellent airflow. Additionally, it is quick-drying,
                                                    ensuring comfort during and after
                                                    activities. </p>
                                            </div>
                                        </div>
                                    </li>
                                </ul>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <!-- product-tab ends -->

    <script>
        // JavaScript to handle color and size selection, quantity validation, and button state
    
        const colorBoxes = document.querySelectorAll('.color-box');
        const sizeLists = document.querySelectorAll('.size-list');
        const sizeBoxes = document.querySelectorAll('.size-box');
        const quantityInput = document.getElementById('quantity-input');
        const addToCartBtn = document.getElementById('add-to-cart-btn');
        const buyNowBtn = document.getElementById('buy-now-btn');
    
        let selectedColorId = null;
        let selectedSizeId = null;
        let maxQuantity = 0;
    
        // Handle color selection
        colorBoxes.forEach((colorBox) => {
            colorBox.addEventListener('click', () => {
                // Remove active class from all color boxes
                colorBoxes.forEach(box => box.classList.remove('active'));
                // Hide all size lists
                sizeLists.forEach(list => list.classList.remove('active'));
    
                // Add active class to the selected color box
                colorBox.classList.add('active');
    
                // Show the corresponding size list
                selectedColorId = colorBox.getAttribute('data-color-id');
                const sizeList = document.getElementById(`size-list-${selectedColorId}`);
                if (sizeList) {
                    sizeList.classList.add('active');
                }
    
                // Reset size and quantity selection
                selectedSizeId = null;
                maxQuantity = 0;
                quantityInput.value = 1;
                quantityInput.disabled = true;
                addToCartBtn.classList.add('disabled');
                buyNowBtn.classList.add('disabled');
            });
        });
    
        // Handle size selection
        sizeBoxes.forEach((sizeBox) => {
            sizeBox.addEventListener('click', () => {
                // Remove selected class from all size boxes
                sizeBoxes.forEach(box => box.classList.remove('selected'));
    
                // Add selected class to the clicked size box
                sizeBox.classList.add('selected');
    
                // Get the selected size details
                selectedSizeId = sizeBox.getAttribute('data-size-id');
                maxQuantity = parseInt(sizeBox.getAttribute('data-quantity'));
                const isAvailable = sizeBox.getAttribute('data-is-available') === 'true';
    
                // Enable quantity input and set its max value
                if (isAvailable && maxQuantity > 0) {
                    quantityInput.disabled = false;
                    addToCartBtn.classList.remove('disabled');
                    buyNowBtn.classList.remove('disabled');
                } else {
                    quantityInput.disabled = true;
                    addToCartBtn.classList.add('disabled');
                    buyNowBtn.classList.add('disabled');
                }
    
                // Reset the quantity input
                quantityInput.value = 1;
            });
        });
    
        // Handle quantity increment/decrement
        document.querySelector('.quantity-left-minus').addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity > 1) {
                quantityInput.value = quantity - 1;
            }
        });
    
        document.querySelector('.quantity-right-plus').addEventListener('click', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity < maxQuantity) {
                quantityInput.value = quantity + 1;
            }
        });
    
        // Prevent quantity input from exceeding max quantity
        quantityInput.addEventListener('input', () => {
            let quantity = parseInt(quantityInput.value);
            if (quantity > maxQuantity) {
                quantityInput.value = maxQuantity;
            } else if (quantity < 1) {
                quantityInput.value = 1;
            }
        });
    </script>

{% endblock %}