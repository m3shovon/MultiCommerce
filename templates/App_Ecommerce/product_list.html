{% extends 'layouts/base.html' %}
{% load static %}


{% block content %}

    <!-- breadcrumb start -->
    <div class="breadcrumb-section">
        <div class="container">
            <h2>Collection</h2>
            <nav class="theme-breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item">
                        <a href="{% url 'App_Ecommerce:home' %}">Home</a>
                    </li>
                    <li class="breadcrumb-item active">Product List</li>
                </ol>
            </nav>
        </div>
    </div>
    <!-- breadcrumb end -->

    <section class="section-b-space ratio_asos">
        <div class="collection-wrapper">
            <div class="container">
                <div class="row">
                    <div class="col-xl-3 col-lg-4 collection-filter">
                        <!-- side-bar collapse block stat -->
                        <div class="collection-filter-block">
                            <!-- brand filter start -->
                            <div class="collection-mobile-back"><span class="filter-back"><i
                                        class="ri-arrow-left-s-line"></i> back</span></div>
                            <div class="collection-collapse-block open">
                                <div class="accordion collection-accordion" id="accordionPanelsStayOpenExample">
                                <form method="GET" action="{% url 'App_Ecommerce:product_list' %}">
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button pt-0" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseOne" aria-expanded="true" aria-controls="panelsStayOpen-collapseOne">
                                                Categories
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseOne" class="accordion-collapse collapse show">
                                            <div class="accordion-body">
                                                <ul class="collection-listing">
                                                    {% for cat in categories %}
                                                    <li>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" name="category" value="{{ cat.slug }}"
                                                                id="category-{{ cat.id }}" {% if cat.slug in selected_categories %}checked{% endif %}>
                                                            <label class="form-check-label" for="category-{{ cat.id }}">
                                                                {{ cat.name }}
                                                            </label>
                                                        </div>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button pt-0" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseTwo" aria-expanded="true" aria-controls="panelsStayOpen-collapseTwo">
                                                Brands
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseTwo" class="accordion-collapse collapse show">
                                            <div class="accordion-body">
                                                <ul class="collection-listing">
                                                    {% for br in brands %}
                                                    <li>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" name="brand" value="{{ br.slug }}"
                                                                id="brand-{{ br.id }}" {% if br.slug in selected_brands %}checked{% endif %}>
                                                            <label class="form-check-label" for="brand-{{ br.id }}">
                                                                {{ br.name }}
                                                            </label>
                                                        </div>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button pt-0" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseThree" aria-expanded="true" aria-controls="panelsStayOpen-collapseThree">
                                                Tags
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseThree" class="accordion-collapse collapse show">
                                            <div class="accordion-body">
                                                <ul class="collection-listing">
                                                    {% for tg in tags %}
                                                    <li>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" name="tag" value="{{ tg.slug }}"
                                                                id="tag-{{ tg.id }}" {% if tg.slug in selected_tags %}checked{% endif %}>
                                                            <label class="form-check-label" for="tag-{{ tg.id }}">
                                                                {{ tg.name }}
                                                            </label>
                                                        </div>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button pt-0" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseFour" aria-expanded="true" aria-controls="panelsStayOpen-collapseFour">
                                                Attributes
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseFour" class="accordion-collapse collapse show">
                                            <div class="accordion-body">
                                                <ul class="collection-listing">
                                                    {% for attr in attributes %}
                                                    <li>
                                                        <div class="form-check">
                                                            <input class="form-check-input" type="checkbox" name="attribute" value="{{ attr.slug }}"
                                                                id="attribute-{{ attr.id }}" {% if attr.slug in selected_attributes %}checked{% endif %}>
                                                            <label class="form-check-label" for="attribute-{{ attr.id }}">
                                                                {{ attr.name }}
                                                            </label>
                                                        </div>
                                                    </li>
                                                    {% endfor %}
                                                </ul>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div class="accordion-item">
                                        <h2 class="accordion-header">
                                            <button class="accordion-button pt-0" type="button" data-bs-toggle="collapse"
                                                data-bs-target="#panelsStayOpen-collapseFive" aria-expanded="true" aria-controls="panelsStayOpen-collapseFive">
                                                Price Range
                                            </button>
                                        </h2>
                                        <div id="panelsStayOpen-collapseFive" class="accordion-collapse collapse show">
                                            <div class="accordion-body">
                                                <div class="form-group">
                                                    <label for="min_price">Min Price:</label>
                                                    <input type="number" name="min_price" id="min_price" value="{{ min_price }}" class="form-control">
                                                </div>
                                                <div class="form-group">
                                                    <label for="max_price">Max Price:</label>
                                                    <input type="number" name="max_price" id="max_price" value="{{ max_price }}" class="form-control">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <button type="submit" class="btn btn-primary">Apply Filters</button>
                                    <a type="btn" href="{% url 'App_Ecommerce:product_list' %}" class="btn btn-danger">Reset</a>
                                </form>
                                </div>
                            </div>
                        </div>
                        <!-- side-bar collapse block end here -->
                    </div>
                    <div class="collection-content col-xl-9 col-lg-8">
                        <div class="page-main-content">
                            <!-- <div class="top-banner-wrapper">
                                <a href="#!">
                                    <img src="{% static 'assets/images/inner-page/banner/1.png' %}"
                                        class="img-fluid blur-up lazyload" alt="">
                                </a>
                            </div> -->
                            <button class="filter-btn btn"><i class="ri-arrow-left-s-line"></i> Filter
                            </button>
                            <div class="collection-product-wrapper">
                                <div class="product-top-filter">
                                    <div class="product-filter-content w-100">
                                        <div class="d-flex align-items-center gap-sm-3 gap-2">
                                            <select class="form-select">
                                                <option selected>Ascending Order</option>
                                                <option value="1">Descending Order</option>
                                                <option value="2">Low - High Price</option>
                                                <option value="3">High - Low Price</option>
                                            </select>

                                            <select class="form-select">
                                                <option selected>10 Products</option>
                                                <option value="1">25 Products</option>
                                                <option value="2">50 Products</option>
                                                <option value="3">100 Products</option>
                                            </select>
                                        </div>


                                        <div class="collection-grid-view">
                                            <ul>
                                                <li class="product-2-layout-view grid-icon">
                                                    <img src="{% static 'assets/images/inner-page/icon/2.png' %}" alt="sort"
                                                        class=" ">
                                                </li>
                                                <li class="product-3-layout-view grid-icon">
                                                    <img src="{% static 'assets/images/inner-page/icon/3.png' %}" alt="sort"
                                                        class=" ">
                                                </li>
                                                <li class="product-4-layout-view grid-icon active">
                                                    <img src="{% static 'assets/images/inner-page/icon/4.png' %}" alt="sort"
                                                        class=" ">
                                                </li>
                                                <li class="list-layout-view list-icon">
                                                    <img src="{% static 'assets/images/inner-page/icon/list.png' %}" alt="sort"
                                                        class=" ">
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                                <div class="product-wrapper-grid">
                                    <div class="row g-3 g-sm-4">
                                        {% for item in items %}
                                        <div class="col-xl-3 col-6 col-grid-box">
                                            <div class="basic-product theme-product-1">
                                                <div class="overflow-hidden">
                                                    <div class="img-wrapper">
                                                        <a href="{% url 'App_Ecommerce:product_detail' item.slug %}">
                                                            <img src="{% static 'assets/images/fashion-1/product/5.jpg' %}"
                                                                class="w-100 img-fluid blur-up lazyload" alt="">
                                                        </a>
                                                        <div class="rating-label"><i
                                                                class="ri-star-fill"></i><span>4.5</span>
                                                        </div>
                                                        <div class="cart-info">
                                                            <a href="#!" title="Add to Wishlist" class="wishlist-icon">
                                                                <i class="ri-heart-line"></i>
                                                            </a>
                                                            <button data-bs-toggle="modal" data-bs-target="#addtocart"
                                                                title="Add to cart">
                                                                <i class="ri-shopping-cart-line"></i>
                                                            </button>
                                                            <a href="#quickView" data-bs-toggle="modal"
                                                                title="Quick View">
                                                                <i class="ri-eye-line"></i>
                                                            </a>
                                                            <!-- <a href="compare.html" title="Compare">
                                                                <i class="ri-loop-left-line"></i>
                                                            </a> -->
                                                        </div>
                                                    </div>
                                                    <div class="product-detail">
                                                        <div>
                                                            <div class="brand-w-color">
                                                                <a class="product-title"
                                                                    href="{% url 'App_Ecommerce:product_detail' item.slug %}">
                                                                    {{ item.title }}
                                                                </a>
                                                                <div class="color-panel">
                                                                    <ul>
                                                                        <li style="background-color: papayawhip;">
                                                                        </li>
                                                                        <li style="background-color: burlywood;">
                                                                        </li>
                                                                        <li style="background-color: gainsboro;">
                                                                        </li>
                                                                    </ul>
                                                                    <span>+2</span>
                                                                </div>
                                                            </div>
                                                            <h6>{{ item.slug }}</h6>

                                                            <h4 class="price">$ {{ item.discount_price }}<del> ${{ item.selling_price }} </del><span
                                                                    class="discounted-price"> {{ item.discount }}% Off
                                                                </span>
                                                            </h4>

                                                        </div>
                                                        <ul class="offer-panel">
                                                            <li><span class="offer-icon"><i
                                                                        class="ri-discount-percent-fill"></i></span>
                                                                Limited Time Offer: {{ item.discount }}% off</li>
                                                            <li><span class="offer-icon"><i
                                                                        class="ri-discount-percent-fill"></i></span>
                                                                Limited Time Offer: {{ item.discount }}% off</li>
                                                            <li><span class="offer-icon"><i
                                                                        class="ri-discount-percent-fill"></i></span>
                                                                Limited Time Offer: {{ item.discount }}% off</li>
                                                        </ul>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                        {% endfor %}
                                    </div>
                                </div>
                                <div class="product-pagination">
                                    <div class="theme-paggination-block">
                                        <nav>
                                            <ul class="pagination">
                                                <!-- Previous Page Link -->
                                                {% if items.has_previous %}
                                                <li class="page-item">
                                                    <a class="page-link" href="?page={{ items.previous_page_number }}{% if category %}&category={{ category }}{% endif %}{% if brand %}&brand={{ brand }}{% endif %}{% if tag %}&tag={{ tag }}{% endif %}" aria-label="Previous">
                                                        <span><i class="ri-arrow-left-s-line"></i></span>
                                                        <span class="sr-only">Previous</span>
                                                    </a>
                                                </li>
                                                {% else %}
                                                <li class="page-item disabled">
                                                    <a class="page-link" href="#!" aria-label="Previous">
                                                        <span><i class="ri-arrow-left-s-line"></i></span>
                                                        <span class="sr-only">Previous</span>
                                                    </a>
                                                </li>
                                                {% endif %}
                                
                                                <!-- Page Number Links -->
                                                {% for num in items.paginator.page_range %}
                                                    {% if items.number == num %}
                                                    <li class="page-item active">
                                                        <a class="page-link" href="#">{{ num }}</a>
                                                    </li>
                                                    {% elif num > items.number|add:'-3' and num < items.number|add:'3' %}
                                                    <li class="page-item">
                                                        <a class="page-link" href="?page={{ num }}{% if category %}&category={{ category }}{% endif %}{% if brand %}&brand={{ brand }}{% endif %}{% if tag %}&tag={{ tag }}{% endif %}">{{ num }}</a>
                                                    </li>
                                                    {% endif %}
                                                {% endfor %}
                                
                                                <!-- Next Page Link -->
                                                {% if items.has_next %}
                                                <li class="page-item">
                                                    <a class="page-link" href="?page={{ items.next_page_number }}{% if category %}&category={{ category }}{% endif %}{% if brand %}&brand={{ brand }}{% endif %}{% if tag %}&tag={{ tag }}{% endif %}" aria-label="Next">
                                                        <span><i class="ri-arrow-right-s-line"></i></span>
                                                        <span class="sr-only">Next</span>
                                                    </a>
                                                </li>
                                                {% else %}
                                                <li class="page-item disabled">
                                                    <a class="page-link" href="#!" aria-label="Next">
                                                        <span><i class="ri-arrow-right-s-line"></i></span>
                                                        <span class="sr-only">Next</span>
                                                    </a>
                                                </li>
                                                {% endif %}
                                            </ul>
                                        </nav>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>
    
{% endblock %}